# Queue

-   基于数组的队列
-   基于链表的队列

## 循环队列

-   用数组来实现队列的时候，在 tail==n 时，即始数组中还有位置，也会有数据搬移，入队操作性能会降低
-   循环队列，判空 head == tail
-   **循环队列，队满的时候，(tail + 1) % n == head**
-   当队满的时候，tail指向的位置，没有数据

## 阻塞队列

-   队列为空时，从头取数据会被阻塞，队列满了，插入数据会被阻塞
-   生产者消费者模型，基于阻塞队列，通过协调生产者与消费者的个数，来提高数据的处理效率

## 并发队列

-   最简单的方式，是在enqueue与dequeue方法加锁，但是锁粒度大并发会降低，同一时间只允许一个操作
-   基于数组的循环队列，使用CAS原子操作

## 队列实现的选择

-   基于链表的实现方式，可以实现一个支持无限排队的无界队列，但是可能会导致过多的请求排队等待，请求处理的响应时间过长，针对响应比较稳感的系统，基于链表实现的无限排队的线程池不合适
-   基于数组实现的有界队列，队列的大小有限，所以线程池中排队的请求超过队列大小时，接下来的请求会被拒绝，这种方式对响应时间敏感的系统来说，应相对更加合适，不过设置一个合理的队列大小，也是非常讲究的，队列太大导致请求太多，队列太小会导致无法充分利用资源，发挥最大的性能
-   对于大部分资源有限的场景，当没有空闲资源时，基本上都可以通过队列这种数据结构来实现请求排队
